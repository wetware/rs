package wetware:streams@0.1.0;

/// Interface for managing bidirectional data streams between host and guest.
interface streams {
    use wasi:io/streams@0.2.9.{input-stream, output-stream};

    /// A bidirectional connection resource that provides access to input and output streams.
    resource connection {
        /// Get the input stream for reading data from the host.
        /// Can only be called once per connection.
        get-input-stream: func() -> input-stream;

        /// Get the output stream for writing data to the host.
        /// Can only be called once per connection.
        get-output-stream: func() -> output-stream;
    }

    /// Create a new connection resource with bidirectional streams.
    create-connection: func() -> connection;
}

/// World for host (exports streams to guests)
world streams-world {
    export streams;
}

/// World for guests (imports streams from host)
world guest-streams {
    import streams;
}
